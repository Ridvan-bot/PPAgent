---
description: DevOps, CI/CD and deployment conventions
globs: "**/*.yml","**/*.yaml","**/Dockerfile*","**/.github/**"
alwaysApply: false
---

# DevOps Conventions

## CI/CD

- Use a single main workflow for test + build; separate workflows for deploy if needed.
- Cache dependencies (e.g. `node_modules` or pnpm/npm cache) to speed up runs.
- Run lint and typecheck in CI; fail on errors.

## Docker

- Use a minimal base image (e.g. `node:20-alpine`) and non-root user when possible.
- Copy only `dist/` and `package.json` (and lockfile) into the image for production; multi-stage build for build deps.
- Set `NODE_ENV=production` in the final image.

## Secrets & Env

- Never commit secrets; use env vars or a secret manager.
- Provide `.env.example` with required keys (values empty or placeholders).

## Scripts

- Prefer `npx` or `pnpm exec` for one-off tools in scripts so versions can be pinned in the project.
- Document in README how to run scripts and what env is required.
